container:
  workspace:
    name: dotfiles
    folder: /workspace
    volume-name: dotfiles-workspace
  runtime:
    user: vscode
  expose:
    address:
      scheme: tcp
      host: 127.0.0.1
      port: 8888
  build:
    container-file: ../Containerfile
    context: ..
    target: dev
  network:
    name: host
  extensions:
    vscode:
      - ms-python.python
      - ms-python.debugpy
      - ms-python.vscode-pylance
      - ms-python.black-formatter
      - ms-python.pylint
      - ms-python.flake8
      - ms-python.isort
      - ryanluker.vscode-coverage-gutters
      - pamaron.pytest-runner
      - ameenahsanma.poetry-monorepo
      - github.vscode-github-actions
workspace:
  policies:
    container:
      backend: podman
    folder:
      create: ask
    file:
      write: ask
  projects:
    ref:
      variables:
        pytest-parallel: auto
        poetry-interpreter-path: $(poetry env info --executable)
      vscode:
        settings:
          - on-save
          - coverage-gutters
          - explorer-auto-reveal
          - python:
              - base
              - exclude-files
              - poetry
              - black:
                  - base
              - flake8:
                  - base
                  - max-line-length
              - pylint:
                  - base
                  - missing-module-docstring
                  - missing-class-docstring
                  - missing-function-docstring
                  - logging-fstring-interpolation
              - isort:
                  - base
                  - profile-black
              - pytest:
                  - base
                  - root-directory
                  - coverage
                  - exit-first
                  - parallel
              - pylance:
                  - base
    root:
      vscode:
        settings:
          - $ref
    poexy:
      alias: Poexy
      path: tools/
      variables:
        pytest-root-directory: tests
        pytest-package-name: poexy
      vscode:
        settings:
          - $ref
          - python:
              - $ref
        tasks:
          - poetry:
              - $all
    poexy-core:
      alias: Poexy-Core
      path: tools/
      variables:
        pytest-root-directory: tests
        pytest-package-name: poexy_core
        pytest-capture: 'no'
        pytest-show-capture: 'no'
      vscode:
        settings:
          - $ref
          - python:
              - $ref
              - pytest:
                - $ref
                - capture
                - show-capture
      tasks:
        - poetry:
            - $all
    ignite:
      alias: Ignite
      path: tools/
      variables:
        pytest-root-directory: tests
        pytest-package-name: ignite
      vscode:
        settings:
          - $ref
        tasks:
          - poetry:
              - $all
    mutex-cli:
      alias: Mutex-CLI
      path: tools/
      variables:
        pytest-root-directory: tests
        pytest-package-name: mutex_cli
      vscode:
        settings:
          - $ref
        tasks:
          - poetry:
              - $all
    mutex:
      alias: Mutex
      path: tools/
      variables:
        pytest-root-directory: tests
        pytest-package-name: mutex
      vscode:
        settings:
          - $ref
        tasks:
          - poetry:
              - $all
